/*!
 * Crafted with ❤ by Salla
 */
import{r as s,h as t,H as a}from"./p-3c7d3f26.js";const l=":host{display:block}";const e=class{constructor(t){s(this,t);this.type=undefined;this.showAvatar=undefined;this.itemId=undefined;this.placeholder=salla.lang.get("blocks.comments.placeholder");this.submitText=salla.lang.get("blocks.comments.submit");this.canComment=undefined;salla.lang.onLoaded((()=>{this.placeholder=salla.lang.get("blocks.comments.placeholder");this.submitText=salla.lang.get("blocks.comments.submit")}));salla.onReady((()=>{this.canComment=salla.config.get("user.can_comment");this.itemId=salla.config.get("page.id");this.type=salla.url.is_page("page-single")?"page":"product"}))}submit(){if(!this.commentForm.reportValidity()){salla.log("CommentForm:: validation error!");return}this.submitBtn.load().then((()=>salla.comment.add({id:this.itemId,comment:this.commentField.value,type:this.type}))).finally((()=>this.submitBtn.stop))}render(){return t(a,null,!!this.canComment?t("form",{ref:s=>this.commentForm=s},t("div",{class:"s-comment-form-wrapper"},this.showAvatar?t("img",{class:"s-comment-form-avatar",src:salla.config.get("user.avatar"),alt:"user avatar"}):"",t("div",{class:"s-comment-form-content"},t("textarea",{cols:30,rows:5,minlength:"4",maxlength:"500",ref:s=>this.commentField=s,placeholder:this.placeholder,class:"s-comment-form-input",required:true}),t("br",null),t("div",{class:"s-comment-form-action"},t("salla-button",{ref:s=>this.submitBtn=s,"loader-position":"center",onClick:()=>this.submit()},this.submitText))))):"")}};e.style=l;export{e as salla_comment_form};
//# sourceMappingURL=p-16e25100.entry.js.map