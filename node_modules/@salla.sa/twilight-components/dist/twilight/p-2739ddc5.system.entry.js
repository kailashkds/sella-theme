var __awaiter=this&&this.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,a){function s(t){try{o(n.next(t))}catch(t){a(t)}}function l(t){try{o(n["throw"](t))}catch(t){a(t)}}function o(t){t.done?r(t.value):i(t.value).then(s,l)}o((n=n.apply(t,e||[])).next())}))};var __generator=this&&this.__generator||function(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol==="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(t){return function(e){return o([t,e])}}function o(l){if(n)throw new TypeError("Generator is already executing.");while(s&&(s=0,l[0]&&(r=0)),r)try{if(n=1,i&&(a=l[0]&2?i["return"]:l[0]?i["throw"]||((a=i["return"])&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;if(i=0,a)l=[l[0]&2,a.value];switch(l[0]){case 0:case 1:a=l;break;case 4:r.label++;return{value:l[1],done:false};case 5:r.label++;i=l[1];l=[0];continue;case 7:l=r.ops.pop();r.trys.pop();continue;default:if(!(a=r.trys,a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){r.label=l[1];break}if(l[0]===6&&r.label<a[1]){r.label=a[1];a=l;break}if(a&&r.label<a[2]){r.label=a[2];r.ops.push(l);break}if(a[2])r.ops.pop();r.trys.pop();continue}l=e.call(t,r)}catch(t){l=[6,t];i=0}finally{n=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:true}}};
/*!
 * Crafted with ❤ by Salla
 */System.register(["./p-5ee0461b.system.js","./p-01a0d85b.system.js"],(function(t){"use strict";var e,r,n,i,a,s,l;return{setters:[function(t){e=t.r;r=t.c;n=t.h;i=t.H;a=t.g},function(t){s=t.F;l=t.a}],execute:function(){var o=":host{display:block}.s-rating-stars-small{line-height:12px}.s-filters-radio{background-image:none !important}";var u=t("salla_filters",function(){function t(t){var n=this;e(this,t);this.changed=r(this,"changed",7);this.isReady=false;this.filters=undefined;this.isSidebarOpen=undefined;this.filtersData={};this.apply=undefined;this.reset=undefined;salla.event.on("filters::hidden",(function(){return n.host.style.display="none"}));salla.lang.onLoaded((function(){n.apply=salla.lang.get("pages.checkout.apply");n.reset=salla.lang.get("pages.categories.filters_reset")}));salla.event.on("filters::fetched",(function(t){var e=t.filters;n.host.style.display="";var r={};n.filters=e.map((function(t){t.label={category_id:salla.lang.get("common.titles.categories"),brand_id:salla.lang.get("common.titles.brands"),rating:salla.lang.get("pages.categories.filter_rating"),price_range:salla.lang.get("pages.categories.filter_price")}[t.key]||t.label;t.inputType=s.CHECKBOX;if(t.key=="rating"){t.inputType=s.RADIO;var e=t.values,i=e.max,a=e.min;t.values=[5,4,3,2,1].filter((function(t){return t>=a||t<=i}))}if(n.filtersData[t.key]){r[t.key]=n.filtersData[t.key]}return t}));n.filtersData=r}))}t.prototype.connectedCallback=function(){try{var t=new URLSearchParams(window.location.search).get("filters");this.filtersData=t?JSON.parse(decodeURIComponent(t)):{}}catch(t){salla.logger.warn("failed to get filters from url",t.message)}};t.prototype.getFilters=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){return[2,this.filtersData]}))}))};t.prototype.applyFilters=function(){return __awaiter(this,void 0,void 0,(function(){var t=this;return __generator(this,(function(e){if(!this.isReady){return[2]}window.scrollTo({top:0,behavior:"smooth"});setTimeout((function(){window.history.pushState({},"",salla.url.addParamToUrl("filters",encodeURIComponent(JSON.stringify(t.filtersData))));salla.event.emit("salla-filters::changed",t.filtersData);t.changed.emit(t.filtersData)}),300);return[2]}))}))};t.prototype.resetFilters=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){this.filtersData={};this.host.childNodes.forEach((function(t){return t.reset&&t.reset()}));salla.event.emit("salla-filters::reset");return[2,this.applyFilters()]}))}))};t.prototype.handleOptionChange=function(t,e,r){if(e.type===l.RANGE){this.filtersData[e.key]=r;return}var n=t.target.checked;if(t.target.type==s.RADIO){n&&(this.filtersData[e.key]=r);n||delete this.filtersData[e.key];return}this.filtersData[e.key]=this.filtersData[e.key]||[];if(n){this.filtersData[e.key].push(r);return}this.filtersData[e.key]=this.filtersData[e.key].filter((function(t){return t!=r}))};t.prototype.render=function(){var t=this;var e,r;return n(i,null,(e=this.filters)===null||e===void 0?void 0:e.map((function(e){return n("salla-filters-widget",{option:e,filtersData:t.filtersData,onChanged:function(e){var r=e.detail,n=r.event,i=r.option,a=r.value;return t.handleOptionChange(n,i,a)}})})),((r=this.filters)===null||r===void 0?void 0:r.length)&&n("div",{class:"s-filters-footer"},n("salla-button",{color:"primary",onClick:function(){return t.applyFilters()}},this.apply),n("salla-button",{color:"gray",fill:"outline",onClick:function(){return t.resetFilters()}},this.reset)))};t.prototype.componentDidLoad=function(){this.isReady=true};Object.defineProperty(t.prototype,"host",{get:function(){return a(this)},enumerable:false,configurable:true});return t}());u.style=o}}}));
//# sourceMappingURL=p-2739ddc5.system.entry.js.map