/*!
 * Crafted with ❤ by Salla
 */
import{r as e,h as i,H as l,g as t}from"./p-3c7d3f26.js";const n=class{constructor(i){e(this,i)}hideAllOptions(e){this.host.querySelectorAll(`[data-show-when^="options[${e}"]`).forEach((e=>{e.classList.add("hidden");this.hideAllOptions(e.dataset.optionId);this.disableInputs(e)}))}disableInputs(e){e.querySelectorAll("[name]").forEach((e=>{var i;e.setAttribute("disabled","");e.removeAttribute("required");if(((i=e===null||e===void 0?void 0:e.tagName)===null||i===void 0?void 0:i.toLowerCase())==="select"){e.value=""}if(["checkbox"].includes(e.getAttribute("type"))&&e.hasOwnProperty("checked")){e.checked=false}}))}changeHandler(e){var i;salla.event.emit("salla-onditional-fields::change",e);salla.log("Received the change event: ",e);if(!e.target||!["SELECT"].includes(e.target.tagName)&&!["checkbox"].includes(e.target.getAttribute("type"))){salla.log("Ignore the change because is not support input: "+(((i=e===null||e===void 0?void 0:e.target)===null||i===void 0?void 0:i.tagName)||"N/A"));return}let l=e.target.name.replace("[]","");let t=e.target.getAttribute("type")==="checkbox";salla.log("Trying to find all the element with condition:",`[data-show-when^="${l}"]`);this.host.querySelectorAll(`[data-show-when^="${l}"]`).forEach((i=>{let l=!(i===null||i===void 0?void 0:i.dataset.showWhen.includes("!="));let n=i===null||i===void 0?void 0:i.dataset.showWhen.replace(/(.*)(=|!=)(.*)/gm,"$3").trim();let d;if(t){let i=Array.from(this.host.querySelectorAll(`input[name="${e.target.name}"]:checked`),(e=>e===null||e===void 0?void 0:e.value));d=i.includes(n.toString())}else{d=n===e.target.value}salla.log("The input is ",t?"Multiple":"Single"," value:",d);let a=l&&d||!l&&!d;if(a){i.classList.remove("hidden");i.querySelectorAll("[name]").forEach((e=>{e.removeAttribute("disabled");if(!["checkbox"].includes(e.getAttribute("type"))&&i.getElementsByClassName("required").length){e.setAttribute("required","")}}))}else{this.hideAllOptions(i.dataset.optionId);i.classList.add("hidden");this.disableInputs(i)}}))}componentDidRender(){this.host.querySelectorAll(`[data-show-when]`).forEach((e=>{var i;let l=(i=e===null||e===void 0?void 0:e.dataset)===null||i===void 0?void 0:i.showWhen.replace(/(.*)(=|!=)(.*)/gm,"$1").trim();if(!l){return}this.changeHandler({target:this.host.querySelector('[name^="'+l+'"]')})}))}render(){return i(l,null,i("slot",null))}get host(){return t(this)}};export{n as salla_conditional_fields};
//# sourceMappingURL=p-dc422f49.entry.js.map