/*!
 * Crafted with ‚ù§ by Salla
 */
System.register(["./p-5ee0461b.system.js"],(function(t){"use strict";var e,n,a;return{setters:[function(t){e=t.r;n=t.h;a=t.H}],execute:function(){var s=":host{display:block}";var o=t("salla_comment_form",function(){function t(t){var n=this;e(this,t);this.type=undefined;this.showAvatar=undefined;this.itemId=undefined;this.placeholder=salla.lang.get("blocks.comments.placeholder");this.submitText=salla.lang.get("blocks.comments.submit");this.canComment=undefined;salla.lang.onLoaded((function(){n.placeholder=salla.lang.get("blocks.comments.placeholder");n.submitText=salla.lang.get("blocks.comments.submit")}));salla.onReady((function(){n.canComment=salla.config.get("user.can_comment");n.itemId=salla.config.get("page.id");n.type=salla.url.is_page("page-single")?"page":"product"}))}t.prototype.submit=function(){var t=this;if(!this.commentForm.reportValidity()){salla.log("CommentForm:: validation error!");return}this.submitBtn.load().then((function(){return salla.comment.add({id:t.itemId,comment:t.commentField.value,type:t.type})})).finally((function(){return t.submitBtn.stop}))};t.prototype.render=function(){var t=this;return n(a,null,!!this.canComment?n("form",{ref:function(e){return t.commentForm=e}},n("div",{class:"s-comment-form-wrapper"},this.showAvatar?n("img",{class:"s-comment-form-avatar",src:salla.config.get("user.avatar"),alt:"user avatar"}):"",n("div",{class:"s-comment-form-content"},n("textarea",{cols:30,rows:5,minlength:"4",maxlength:"500",ref:function(e){return t.commentField=e},placeholder:this.placeholder,class:"s-comment-form-input",required:true}),n("br",null),n("div",{class:"s-comment-form-action"},n("salla-button",{ref:function(e){return t.submitBtn=e},"loader-position":"center",onClick:function(){return t.submit()}},this.submitText))))):"")};return t}());o.style=s}}}));
//# sourceMappingURL=p-ea23b808.system.entry.js.map