{"file":"salla-modal2.js","mappings":"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","names":["CancelIcon","CheckCircleIcon"],"sources":["./src/components/salla-modal/salla-modal.scss?tag=salla-modal","./src/components/salla-modal/salla-modal.tsx"],"sourcesContent":["/*\n* Salla Modal Component: popup modal used in most parts of the theme\n* You can use these classes to target the elements in the component.\n*/\n\n@media screen and (max-width: 470px) {\n  .modal-is-open {\n    position: fixed;\n    width: 100%;\n  }\n}\n\n.s-modal {\n  &-container{\n\n  }\n  &-wrapper {\n\n  }\n  &-close {\n\n  }\n  &-header {\n\n  }\n  &-header-inner {\n\n  }\n  &-header-content {\n\n  }\n  &-header-img {\n\n  }\n  &-icon {\n\n  }\n  &-bg-normal {\n\n  }\n  &-bg-success {\n\n  }\n  &-bg-error {\n\n  }\n  &-bg-primary {\n\n  }\n  &-text-success {\n\n  }\n  &-text-error {\n\n  }\n  &-title {\n\n  }\n  &-sub-title {\n\n  }\n  &-title-below {\n\n  }\n  &-body-slot {\n\n  }\n  &-body {\n\n  }\n  &-padding {\n\n  }\n  &-spacer {\n\n  }\n  &-align-middle {\n\n  }\n  &-align-top {\n\n  }\n  &-align-bottom {\n\n  }\n  &-overlay {\n\n  }\n  &-overlay-leaving {\n\n  }\n  &-entering {\n\n  }\n  &-leaving {\n\n  }\n  &-is-center {\n\n  }\n  // modal sizes\n  &-xs {\n\n  }\n  &-sm {\n\n  }\n  &-md {\n\n  }\n  &-lg {\n\n  }\n  &-xl {\n\n  }\n  &-full {\n\n  }\n}\n","import { Component, Element, h, Host, Method, Prop, State, Watch, Event, EventEmitter, Listen } from '@stencil/core';\nimport CancelIcon from '../../assets/svg/cancel.svg';\nimport AlertEngineIcon from '../../assets/svg/alert-engine.svg';\nimport CheckCircleIcon from '../../assets/svg/check-circle2.svg';\nimport Helper from '../../Helpers/Helper';\n\n/**\n * @slot footer - The footer of modal\n */\n\n@Component({ tag: 'salla-modal', styleUrl: 'salla-modal.scss' })\nexport class SallaModal {\n  constructor() {\n    salla.event.on('modal::open', target => target == this.host.id && this.open());\n    salla.event.on('modal::close', target => target == this.host.id && this.close());\n    this.modalTitle = this.host.getAttribute('modal-title');\n  }\n\n  /**\n   * Sets the modal to be closable. Defaults to `true`\n   */\n  @Prop({ mutable: true }) isClosable: boolean = true;//todo::rename unclude. Suggestion => persistent\n  /**\n   * The size of the modal\n   */\n  @Prop({ reflect: true }) width: 'xs' | 'sm' | 'md' | 'lg' | 'xl' | 'full' = 'md';\n  /**\n   * The position of the modal\n   */\n  @Prop({ reflect: true }) position: 'top' | 'middle' | 'bottom' = 'middle';\n  /**\n   * open the modal on rendering\n   */\n  @Prop({ reflect: true }) visible: boolean = false;\n  /**\n   * open the modal on rendering\n   */\n  @Prop({ reflect: true }) hasSkeleton: boolean = false;\n  /**\n   * Show loading in the middle\n   */\n  @Prop({ reflect: true, mutable: true }) isLoading: boolean = false;\n\n  /**\n   * Show subtitle before the title or not, defaults to `false` (after the title)\n   */\n  @Prop() subTitleFirst: boolean = false;//todo:: choose better name\n\n  /**\n   * Avoid padding in the modal body or not, defaults to `false`\n   */\n  @Prop() noPadding: boolean = false;//todo:: choose better name\n\n  /**\n   * Set modal sub title.\n   */\n  @Prop() subTitle: string = '';\n\n  /**\n   * Align modal content to center, defaults to `false`\n   */\n  @Prop() centered: boolean = false;\n\n  /**\n   * Set the style of the header icon.\n   */\n  @Prop() iconStyle: 'error' | 'success' | 'primary' | 'normal' = undefined;\n\n  @State() modalTitle: string;\n\n  private overlay: HTMLElement;\n\n  @Element() host: HTMLElement;\n\n  /**\n   * Event emitted when the modal visibilty is changed.\n   */\n  @Event() modalVisibilityChanged: EventEmitter<Boolean>;\n\n  @Watch('visible')\n  handleVisible(newValue: boolean) {\n    if (!newValue) {\n      this.modalVisibilityChanged.emit(false);\n      this.toggleModal(false);\n      return;\n    }\n    this.modalVisibilityChanged.emit(true);\n    this.host.classList.remove('s-hidden');\n    setTimeout(() => this.toggleModal(true)); //small amont of time to running toggle After adding hidden\n  }\n\n  @Listen('keyup')\n  handleKeyUp(ev: KeyboardEvent) {\n    if (ev.key === \"KeyUp\") {\n      this.closeModal()\n    }\n  }\n\n  /**\n   * Open the modal\n   */\n  @Method()\n  async open() {\n    this.host.setAttribute('visible', '');\n    this.handleAutoFocus();\n    return this.host;\n  }\n\n  /**\n   * close the modal\n   */\n  @Method()\n  async close() {\n    this.host.removeAttribute('visible');\n    return this.host;\n  }\n\n  /**\n   * Change the Modal Title\n   * @param {string} modalTitle\n   */\n  @Method()\n  async setTitle(modalTitle) {\n    this.modalTitle = modalTitle;\n    return this.host;\n  }\n\n  /**\n   * Start loading\n   */\n  @Method()\n  async loading() {\n    this.isLoading = true;\n    return this.host;\n  }\n\n\n  /**\n   * Stop the loading\n   */\n  @Method()\n  async stopLoading() {\n    this.isLoading = false;\n    return this.host;\n  }\n\n  private handleAutoFocus() {\n    const firstFocusableElement = this.host.querySelector('input, textarea, select') as HTMLElement;\n    if (!firstFocusableElement) {\n      return;\n    }\n    setTimeout(() => {\n      firstFocusableElement.focus();\n    }, 100);\n  }\n\n  private toggleModal(isOpen) {\n    const body = this.host.querySelector('.s-modal-body');\n    Helper.toggleElementClassIf(body, 's-modal-entering', 's-modal-leaving', () => isOpen)\n      .toggleElementClassIf(this.overlay, 's-modal-entering', 's-modal-overlay-leaving', () => isOpen)\n      .toggleElementClassIf(document.body, 'modal-is-open', 'modal-is-closed', () => isOpen);\n    if (!isOpen) {\n      setTimeout(() => this.host.classList.add('s-hidden'), 350);\n    }\n  }\n\n  private closeModal() {\n    if (!this.isClosable) {\n      return;\n    }\n    this.host.removeAttribute('visible');\n  }\n\n  private iconBlockClasses() {\n    return {\n      's-modal-icon': true,\n      's-modal-bg-error': this.iconStyle == 'error',\n      's-modal-bg-success': this.iconStyle == 'success',\n      's-modal-bg-normal': !this.iconStyle,\n      's-modal-bg-primary': this.iconStyle == 'primary'\n    };\n  }\n\n  private getWidth() {\n    return this.isLoading ? (this.hasSkeleton ? 'md' : 'xs') : this.width\n  }\n\n  //todo:: pref for each modal\n  render() {\n    this.host.id = this.host.id || 'salla-modal';\n\n\n    if (this.isLoading) {\n      return (\n        <Host class='salla-modal s-modal s-modal-container s-hidden' aria-modal=\"true\" role=\"dialog\" onKeyUp={e => this.handleKeyUp(e)}>\n          <div class=\"s-modal-overlay\" ref={el => this.overlay = el} onClick={() => this.closeModal()} />\n          <div class=\"s-modal-wrapper\">\n            <span class={'s-modal-spacer s-modal-align-' + this.position}>&#8203;</span>\n            <div class={'s-modal-body ' + 's-modal-align-' + this.position + ' s-modal-' + this.getWidth() + (this.noPadding ? ' s-modal-nopadding' : ' s-modal-padding')}>\n              <slot name=\"loading\">\n                <salla-loading></salla-loading>\n              </slot>\n              {\n                // we have a limitations with StencilJS, when the component is not shadow\n                // all the dom of host append to component even if <slot /> is not in the render\n                // So we'll use a workaround, render all the slot as hidden when is loading\n                // @see https://github.com/ionic-team/stencil/issues/399\n              }\n              <div class=\"s-hidden\">\n                <slot />\n              </div>\n            </div>\n          </div>\n        </Host>\n      );\n    }\n\n\n    return (\n      <Host class='salla-modal s-modal s-modal-container s-hidden' aria-modal=\"true\" role=\"dialog\">\n        <div class=\"s-modal-overlay\" ref={el => this.overlay = el} onClick={() => this.closeModal()} />\n        <div class=\"s-modal-wrapper\">\n          <span class={'s-modal-spacer s-modal-align-' + this.position}>&#8203;</span>\n          <div\n            class={'s-modal-body ' + 's-modal-align-' + this.position + ' s-modal-' + this.getWidth() + (this.noPadding ? ' s-modal-nopadding' : ' s-modal-padding')}>\n            <div class={{ 's-modal-header': true, 's-modal-is-center': this.centered }}>\n              {this.isClosable ?\n                <button class=\"s-modal-close\" onClick={() => this.closeModal()} type=\"button\">\n                  <span innerHTML={CancelIcon} />\n                </button>\n                : ''}\n\n              {this.modalTitle || this.subTitle ?\n                <div class=\"s-modal-header-inner\">\n                  <slot name='icon'>\n                    {!!this.iconStyle ?\n                      <div class={this.iconBlockClasses()} innerHTML={this.iconStyle == 'error' ? AlertEngineIcon : CheckCircleIcon} />\n                      : ''\n                    }\n                  </slot>\n                  <div class=\"s-modal-header-content\">\n                    {this.modalTitle ? <div class={{ 's-modal-title': true, 's-modal-title-below': this.subTitleFirst }}\n                      innerHTML={this.modalTitle} /> : ''}\n                    {this.subTitle ? <p class={{ 's-modal-sub-title': true }} innerHTML={this.subTitle} /> : ''}\n                  </div>\n                </div>\n                : ''}\n            </div>\n            <slot />\n            <slot name=\"footer\" />\n\n          </div>\n        </div>\n      </Host>\n    );\n  }\n  //move the modal as root dom, because we need the model to be outside the forms\n  componentDidLoad() {\n    document.body.append(this.host);\n  }\n}\n"],"version":3}