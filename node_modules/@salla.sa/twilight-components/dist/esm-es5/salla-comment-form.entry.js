/*!
 * Crafted with ‚ù§ by Salla
 */
import{r as registerInstance,h,H as Host}from"./index-957caa0e.js";var sallaCommentFormCss=":host{display:block}";var SallaCommentForm=function(){function t(t){var e=this;registerInstance(this,t);this.type=undefined;this.showAvatar=undefined;this.itemId=undefined;this.placeholder=salla.lang.get("blocks.comments.placeholder");this.submitText=salla.lang.get("blocks.comments.submit");this.canComment=undefined;salla.lang.onLoaded((function(){e.placeholder=salla.lang.get("blocks.comments.placeholder");e.submitText=salla.lang.get("blocks.comments.submit")}));salla.onReady((function(){e.canComment=salla.config.get("user.can_comment");e.itemId=salla.config.get("page.id");e.type=salla.url.is_page("page-single")?"page":"product"}))}t.prototype.submit=function(){var t=this;if(!this.commentForm.reportValidity()){salla.log("CommentForm:: validation error!");return}this.submitBtn.load().then((function(){return salla.comment.add({id:t.itemId,comment:t.commentField.value,type:t.type})})).finally((function(){return t.submitBtn.stop}))};t.prototype.render=function(){var t=this;return h(Host,null,!!this.canComment?h("form",{ref:function(e){return t.commentForm=e}},h("div",{class:"s-comment-form-wrapper"},this.showAvatar?h("img",{class:"s-comment-form-avatar",src:salla.config.get("user.avatar"),alt:"user avatar"}):"",h("div",{class:"s-comment-form-content"},h("textarea",{cols:30,rows:5,minlength:"4",maxlength:"500",ref:function(e){return t.commentField=e},placeholder:this.placeholder,class:"s-comment-form-input",required:true}),h("br",null),h("div",{class:"s-comment-form-action"},h("salla-button",{ref:function(e){return t.submitBtn=e},"loader-position":"center",onClick:function(){return t.submit()}},this.submitText))))):"")};return t}();SallaCommentForm.style=sallaCommentFormCss;export{SallaCommentForm as salla_comment_form};
//# sourceMappingURL=salla-comment-form.entry.js.map