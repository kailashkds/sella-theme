/*!
 * Crafted with ‚ù§ by Salla
 */
import{r as registerInstance,h,H as Host,g as getElement}from"./index-957caa0e.js";var SallaConditionalFields=function(){function e(e){registerInstance(this,e)}e.prototype.hideAllOptions=function(e){var t=this;this.host.querySelectorAll('[data-show-when^="options['.concat(e,'"]')).forEach((function(e){e.classList.add("hidden");t.hideAllOptions(e.dataset.optionId);t.disableInputs(e)}))};e.prototype.disableInputs=function(e){e.querySelectorAll("[name]").forEach((function(e){var t;e.setAttribute("disabled","");e.removeAttribute("required");if(((t=e===null||e===void 0?void 0:e.tagName)===null||t===void 0?void 0:t.toLowerCase())==="select"){e.value=""}if(["checkbox"].includes(e.getAttribute("type"))&&e.hasOwnProperty("checked")){e.checked=false}}))};e.prototype.changeHandler=function(e){var t=this;var a;salla.event.emit("salla-onditional-fields::change",e);salla.log("Received the change event: ",e);if(!e.target||!["SELECT"].includes(e.target.tagName)&&!["checkbox"].includes(e.target.getAttribute("type"))){salla.log("Ignore the change because is not support input: "+(((a=e===null||e===void 0?void 0:e.target)===null||a===void 0?void 0:a.tagName)||"N/A"));return}var n=e.target.name.replace("[]","");var o=e.target.getAttribute("type")==="checkbox";salla.log("Trying to find all the element with condition:",'[data-show-when^="'.concat(n,'"]'));this.host.querySelectorAll('[data-show-when^="'.concat(n,'"]')).forEach((function(a){var n=!(a===null||a===void 0?void 0:a.dataset.showWhen.includes("!="));var i=a===null||a===void 0?void 0:a.dataset.showWhen.replace(/(.*)(=|!=)(.*)/gm,"$3").trim();var l;if(o){var r=Array.from(t.host.querySelectorAll('input[name="'.concat(e.target.name,'"]:checked')),(function(e){return e===null||e===void 0?void 0:e.value}));l=r.includes(i.toString())}else{l=i===e.target.value}salla.log("The input is ",o?"Multiple":"Single"," value:",l);var s=n&&l||!n&&!l;if(s){a.classList.remove("hidden");a.querySelectorAll("[name]").forEach((function(e){e.removeAttribute("disabled");if(!["checkbox"].includes(e.getAttribute("type"))&&a.getElementsByClassName("required").length){e.setAttribute("required","")}}))}else{t.hideAllOptions(a.dataset.optionId);a.classList.add("hidden");t.disableInputs(a)}}))};e.prototype.componentDidRender=function(){var e=this;this.host.querySelectorAll("[data-show-when]").forEach((function(t){var a;var n=(a=t===null||t===void 0?void 0:t.dataset)===null||a===void 0?void 0:a.showWhen.replace(/(.*)(=|!=)(.*)/gm,"$1").trim();if(!n){return}e.changeHandler({target:e.host.querySelector('[name^="'+n+'"]')})}))};e.prototype.render=function(){return h(Host,null,h("slot",null))};Object.defineProperty(e.prototype,"host",{get:function(){return getElement(this)},enumerable:false,configurable:true});return e}();export{SallaConditionalFields as salla_conditional_fields};
//# sourceMappingURL=salla-conditional-fields.entry.js.map