{"version":3,"file":"salla-user-settings.js","sourceRoot":"","sources":["../../../src/components/salla-user-settings/salla-user-settings.tsx"],"names":[],"mappings":"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","sourcesContent":["import {Component, Host, h, State, Prop} from '@stencil/core';\nimport Bullhorn from '../../assets/svg/bullhorn.svg';\nimport UserOff from '../../assets/svg/user-off.svg';\n\n@Component({\n  tag: 'salla-user-settings',\n  styleUrl: 'salla-user-settings.scss',\n})\nexport class SallaUserSettings {\n  constructor() {\n    salla.lang.onLoaded(() => {\n      this.deactivateAccount = salla.lang.get('pages.profile.deactivate_account');\n      this.promotionalMsgs = salla.lang.get('pages.profile.promotional_messages');\n      this.deactivateDesc = salla.lang.get('pages.profile.deactivate_account_description');\n      this.promotionalMsgsDesc = salla.lang.get('pages.profile.promotional_messages_description');\n      this.warningText = salla.lang.get('pages.profile.warning_for_deactivate');\n      this.sorryForLeavingText = salla.lang.get('pages.profile.sorry_for_leaving');\n      this.keepAccount = salla.lang.get('pages.profile.keep_account')\n    });\n  }\n\n  private confirmationModal: HTMLSallaModalElement;\n\n\n  // Texts\n  @State() deactivateAccount: string = salla.lang.get('pages.profile.deactivate_account');\n  @State() promotionalMsgs: string = salla.lang.get('pages.profile.promotional_messages');\n  @State() deactivateDesc: string = salla.lang.get('pages.profile.deactivate_account_description');\n  @State() promotionalMsgsDesc: string = salla.lang.get('pages.profile.promotional_messages_description');\n  @State() sorryForLeavingText: string = salla.lang.get('pages.profile.warning_for_deactivate');\n  @State() warningText: string = salla.lang.get('pages.profile.sorry_for_leaving');\n  @State() keepAccount: string = salla.lang.get('pages.profile.keep_account');\n\n  @State() buttonLoading: boolean = false;\n\n  /**\n   * Value used for handling notification toggle check box.\n   */\n  @Prop({reflect: true}) isNotifiable: boolean = false;\n\n  private toggleNotification(event) {\n    salla.profile.updateSettings({is_notifiable: event.target.checked})\n  }\n\n  private capitalizeText(str) {\n    return str.charAt(0).toUpperCase() + str.slice(1);\n  }\n\n  private openDeactivateModal() {\n    this.confirmationModal.setTitle(this.capitalizeText(this.deactivateAccount));\n    this.confirmationModal.open()\n  }\n\n  private async deleteAccount() {\n    await salla.profile.delete().finally(() => this.confirmationModal.close())\n  }\n\n  render() {\n    return (\n      <Host class=\"s-user-settings-wrapper\">\n        <div class=\"s-user-settings-section\">\n          <salla-list-tile>\n            <div slot=\"icon\" class=\"s-user-settings-section-icon\">\n              <span innerHTML={Bullhorn}></span>\n            </div>\n\n            <div slot=\"title\" class=\"s-user-settings-section-title\">\n              {this.capitalizeText(this.promotionalMsgs)}\n            </div>\n            <div slot=\"subtitle\" class=\"s-user-settings-section-subtitle\">\n              {this.capitalizeText(this.promotionalMsgsDesc)}\n            </div>\n            <div slot='action' class=\"s-user-settings-section-action\">\n              <label class=\"s-toggle\">\n                <input class=\"s-toggle-input\"\n                       checked={this.isNotifiable}\n                       onChange={(e) => this.toggleNotification(e)}\n                       type=\"checkbox\"/>\n                <div class=\"s-toggle-switcher\"></div>\n              </label>\n            </div>\n          </salla-list-tile>\n        </div>\n        <div class=\"s-user-settings-section s-user-settings-section-deactivate-user\">\n          <salla-list-tile>\n            <div slot=\"icon\" class=\"s-user-settings-section-icon\">\n              <span innerHTML={UserOff}></span>\n            </div>\n            <div slot=\"title\" class=\"s-user-settings-section-title\">\n              {this.capitalizeText(this.deactivateAccount)}\n            </div>\n            <div slot=\"subtitle\" class=\"s-user-settings-section-subtitle\">\n              {this.capitalizeText(this.deactivateDesc)}\n            </div>\n            <div slot='action' class=\"s-user-settings-section-action\">\n              <salla-button fill=\"outline\" color=\"danger\" shape=\"btn\" size=\"medium\" width=\"normal\"\n                            onClick={() => this.openDeactivateModal()}>{this.capitalizeText(this.deactivateAccount)}</salla-button>\n            </div>\n          </salla-list-tile>\n        </div>\n        <salla-modal width=\"sm\" subTitle={this.capitalizeText(this.sorryForLeavingText)}\n                     ref={modal => this.confirmationModal = modal}>\n          <span slot='icon' class=\"s-user-settings-confirmation-icon\" innerHTML={UserOff}></span>\n          <div class=\"s-user-settings-confirmation\">\n            <div class=\"s-user-settings-confirmation-warning\">\n              {this.capitalizeText(this.warningText)}\n            </div>\n            <div class=\"s-user-settings-confirmation-actions\">\n              <salla-button width=\"wide\" onClick={() => this.confirmationModal.close()}>\n                {this.capitalizeText(this.keepAccount)}</salla-button>\n              <salla-button fill='outline' loading={this.buttonLoading} width=\"wide\"\n                            onClick={() => this.deleteAccount()}>{this.capitalizeText(this.deactivateAccount)}</salla-button>\n            </div>\n          </div>\n        </salla-modal>\n      </Host>\n    );\n  }\n\n}\n"]}