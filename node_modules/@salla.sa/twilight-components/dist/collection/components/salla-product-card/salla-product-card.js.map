{"version":3,"file":"salla-product-card.js","sourceRoot":"","sources":["../../../src/components/salla-product-card/salla-product-card.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Host, h, Prop, State, Element } from '@stencil/core';\nimport Heart from '../../assets/svg/heart.svg';\nimport Star from '../../assets/svg/star2.svg';\n\n/**\n * @slot add-to-cart-label - Add to cart label.\n */\n@Component({\n  tag: 'salla-product-card',\n  styleUrl: 'salla-product-card.scss',\n  assetsDirs: ['assets']\n})\n\nexport class SallaProductCard {\n  constructor() {\n    // Store configs\n    salla.onReady(() => {\n      this.fitImageHeight = salla.config.get('store.settings.product.fit_type');\n      salla.wishlist.event.onAdded((_res, id) => this.toggleFavoriteIcon(true, id));\n      salla.wishlist.event.onRemoved((_res, id) => this.toggleFavoriteIcon(false, id));\n      this.placeholder = salla.url.asset(salla.config.get('theme.settings.placeholder'));\n    });\n\n    // Language\n    salla.lang.onLoaded(() => {\n      this.remained = salla.lang.get('pages.products.remained');\n      this.donationAmount = salla.lang.get('pages.products.donation_amount');\n      this.startingPrice = salla.lang.get('pages.products.starting_price');\n      this.addToCart = salla.lang.get('pages.cart.add_to_cart');\n      this.outOfStock = salla.lang.get('pages.products.out_of_stock');\n    })\n\n    // Parse product data\n    if (this.product) {\n      try {\n        this.productData = typeof this.product == 'object' ? this.product : JSON.parse(this.product);\n        return;\n      } catch (e) {\n        salla.log('Bad json passed via product prop');\n      }\n    }\n  }\n\n  @Element() host: HTMLElement;\n  // State\n  @State() productData: any;\n  @State() fitImageHeight: boolean;\n  @State() remained: string;\n  @State() outOfStock: string;\n  @State() donationAmount: string;\n  @State() startingPrice: string;\n  @State() addToCart: string;\n  @State() placeholder: string;\n\n\n  // Refs\n  private pie: any;\n  private wishlistBtn: HTMLSallaButtonElement;\n  private addBtn: HTMLSallaAddProductButtonElement;\n\n  // Props\n\n\n  /**\n   *  Product information.\n   */\n  @Prop() product: string;\n\n  /**\n   *  Horizontal card.\n   */\n  @Prop() horizontal: boolean;\n\n  /**\n   *  Support shadow on hover.\n   */\n  @Prop() shadowOnHover: boolean;\n\n  /**\n   *  Hide add to cart button.\n   */\n  @Prop() hideAddBtn: boolean;\n\n  /**\n   *  Full image card.\n   */\n  @Prop() fullImage: boolean;\n\n  /**\n   *  Minimal card.\n   */\n  @Prop() minimal: boolean;\n\n  /**\n   *  Special card.\n   */\n  @Prop() isSpecial: boolean;\n\n  /**\n   *  Show quantity.\n   */\n  @Prop() showQuantity: boolean;\n\n\n  // Private Methods\n  private initCircleBar() {\n    let qty = this.productData.quantity,\n      total = this.productData.quantity > 100 ? this.productData.quantity * 2 : 100,\n      roundPercent = (qty / total) * 100,\n      bar = this.pie.querySelector('.s-product-card-content-pie-svg-bar'),\n      strokeDashOffsetValue = 100 - roundPercent;\n    bar.style.strokeDashoffset = strokeDashOffsetValue;\n  }\n\n  private toggleFavoriteIcon(isAdded = true, id = null) {\n    if (id && id !== this.productData.id) {\n      return;\n    }\n    this.wishlistBtn?.classList.toggle('s-product-card-wishlist-added', isAdded);\n  }\n\n  private formatDate(date) {\n    let d = new Date(date);\n    return `${d.getFullYear()}-${d.getMonth() + 1}-${d.getDate()}`;\n  }\n\n  private getProductBadge() {\n    if (this.productData.promotion_title) {\n      return <div class=\"s-product-card-promotion-title\">{this.productData.promotion_title}</div>\n    }\n    if (this.showQuantity && this.productData?.quantity) {\n      return <div\n        class=\"s-product-card-quantity\">{this.remained} {salla.helpers.number(this.productData?.quantity)}</div>\n    }\n    if (this.showQuantity && this.productData?.is_out_of_stock) {\n      return <div class=\"s-product-card-out-badge\">{this.outOfStock}</div>\n    }\n    return '';\n\n  }\n\n  getPriceFormat(price) {\n    if (!price) {\n      return;\n    }\n\n    return salla.money(price);\n  }\n\n  private getProductPrice() {\n    if (this.productData.is_on_sale) {\n      return <div class=\"s-product-card-sale-price\">\n        <h4>{this.getPriceFormat(this.productData.sale_price)}</h4>\n        <span>{this.getPriceFormat(this.productData?.regular_price)}</span>\n      </div>;\n    }\n    if (this.productData.starting_price) {\n      return <div class=\"s-product-card-starting-price\"><p>{this.startingPrice}</p>\n        <h4> {this.getPriceFormat(this.productData?.starting_price)} </h4></div>\n    }\n    return <h4 class=\"s-product-card-price\">{this.getPriceFormat(this.productData?.price)}</h4>\n  }\n\n  render() {\n    const classes = {\n      's-product-card-entry': true,\n      's-product-card-vertical': !this.horizontal && !this.fullImage && !this.minimal,\n      's-product-card-horizontal': this.horizontal && !this.fullImage && !this.minimal,\n      's-product-card-fit-height': this.fitImageHeight && !this.isSpecial && !this.fullImage && !this.minimal,\n      's-product-card-special': this.isSpecial,\n      's-product-card-full-image': this.fullImage,\n      's-product-card-minimal': this.minimal,\n      's-product-card-donation': this.productData?.donation,\n      's-product-card-shadow': this.shadowOnHover,\n      's-product-card-out-of-stock': this.productData?.is_out_of_stock,\n    };\n    return (\n      <Host id={`product-${this.productData?.id}`} class={classes}>\n        <div class={!this.fullImage ? 's-product-card-image' : 's-product-card-image-full'}>\n          <a href={this.productData?.url}>\n            <img class={`s-product-card-image-${salla.url.is_placeholder(this.productData?.image?.url)\n              ? 'contain'\n              : this.fitImageHeight\n                ? this.fitImageHeight\n                : 'cover'} lazy`}\n              src={this.placeholder}\n              alt={this.productData?.image?.alt}\n              data-src={this.productData?.image?.url || this.productData?.thumbnail}\n            />\n            {!this.fullImage && !this.minimal ? this.getProductBadge() : ''}\n          </a>\n          {this.fullImage && <a href={this.productData?.url} class=\"s-product-card-overlay\" />}\n          {!this.horizontal && !this.fullImage ?\n            <salla-button\n              shape=\"icon\"\n              fill=\"none\"\n              color=\"light\"\n              aria-label=\"Add or remove to wishlist\"\n              ref={el => this.wishlistBtn = el}\n              class=\"s-product-card-wishlist-btn animated\"\n              onClick={() => salla.wishlist.toggle(this.productData.id)}>\n              <span innerHTML={Heart} />\n            </salla-button> : ''\n          }\n        </div>\n        <div class=\"s-product-card-content\">\n          {this.isSpecial && this.productData?.quantity ?\n            <div class=\"s-product-card-content-pie\" ref={pie => this.pie = pie}>\n              <span>\n                <b>{salla.helpers.number(this.productData?.quantity)}</b>\n                {this.remained}\n              </span>\n              <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"-2 -1 36 34\" class=\"s-product-card-content-pie-svg\">\n                <circle cx=\"16\" cy=\"16\" r=\"15.9155\" class=\"s-product-card-content-pie-svg-base\" />\n                <circle cx=\"16\" cy=\"16\" r=\"15.9155\" class=\"s-product-card-content-pie-svg-bar\" />\n              </svg>\n            </div>\n            : ''}\n\n          <div class={{ 's-product-card-content-main': true, 's-product-card-content-extra-padding': this.isSpecial }}>\n            <h3 class=\"s-product-card-content-title\">\n              <a href={this.productData?.url}>{this.productData?.name}</a>\n            </h3>\n\n            {this.productData?.subtitle && !this.minimal ?\n              <p class=\"s-product-card-content-subtitle\">{this.productData?.subtitle}</p>\n              : ''}\n          </div>\n          {this.productData?.donation && !this.minimal && !this.fullImage ?\n            [<salla-progress-bar donation={this.productData?.donation} />,\n            <div class=\"s-product-card-donation-input\">\n              {this.productData?.donation?.can_donate ?\n                [<label htmlFor=\"donation-amount\">{this.donationAmount} <span>*</span></label>,\n                <input\n                  type=\"text\"\n                  onInput={e => {\n                    salla.helpers.inputDigitsOnly(e.target);\n                    this.addBtn.donatingAmount = (e.target as any).value;\n                  }}\n                  id=\"donation-amount\"\n                  name=\"donating_amount\"\n                  class=\"s-form-control\"\n                  placeholder={this.donationAmount} />]\n                : ''}\n            </div>]\n            : ''}\n          <div class={{ 's-product-card-content-sub': true, 's-product-card-content-extra-padding': this.isSpecial }}>\n            {this.getProductPrice()}\n            {this.productData?.rating?.stars && !this.minimal ?\n              <div class=\"s-product-card-rating\">\n                <span innerHTML={Star}/>\n                <span>{this.productData.rating.stars}</span>\n              </div>\n               : ''}\n          </div>\n\n          {this.isSpecial && this.productData.discount_ends\n            ? <salla-count-down date={this.formatDate(this.productData.discount_ends)} end-of-day={true} boxed={true}\n              labeled={true} />\n            : ''}\n\n\n          {!this.hideAddBtn ?\n            <div class=\"s-product-card-content-footer\">\n              {/* @ts-ignore */}\n              <salla-add-product-button fill=\"outline\" width=\"wide\"\n                ref={el => this.addBtn = el}\n                product-id={this.productData.id}\n                product-status={this.productData.status}\n                product-type={this.productData.type}>\n                <slot name=\"add-to-cart-label\">{this.productData.add_to_cart_label}</slot>\n              </salla-add-product-button>\n\n              {this.horizontal || this.fullImage ?\n                <salla-button\n                  shape=\"icon\"\n                  fill=\"none\"\n                  color=\"light\"\n                  ref={el => this.wishlistBtn = el}\n                  aria-label=\"Add or remove to wishlist\"\n                  class=\"s-product-card-wishlist-btn animated\"\n                  onClick={() => salla.wishlist.toggle(this.productData.id)}\n                  data-id=\"{{ product.id }}\">\n                  <span class=\"text-xl\" innerHTML={Heart} />\n                </salla-button>\n                : ''}\n            </div>\n            : ''}\n        </div>\n      </Host>\n    );\n  }\n\n  componentDidLoad() {\n    document.lazyLoadInstance?.update(document.querySelectorAll('.s-product-card-image .lazy'));\n    if (this.productData?.quantity && this.isSpecial) {\n      this.initCircleBar();\n    }\n\n    if (!salla.config.isGuest() && salla.storage.get('salla::wishlist', []).includes(this.productData.id)) {\n      this.toggleFavoriteIcon();\n    }\n  }\n\n}\n"]}