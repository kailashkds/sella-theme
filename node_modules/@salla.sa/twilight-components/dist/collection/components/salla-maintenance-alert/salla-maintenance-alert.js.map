{"version":3,"file":"salla-maintenance-alert.js","sourceRoot":"","sources":["../../../src/components/salla-maintenance-alert/salla-maintenance-alert.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAC,SAAS,EAAE,IAAI,EAAE,CAAC,EAAE,KAAK,EAAE,OAAO,EAAC,MAAM,eAAe,CAAC;AACjE,OAAO,MAAM,MAAM,6BAA6B,CAAC;AAMjD,MAAM,OAAO,qBAAqB;;;;;;EAOhC,iBAAiB;IACf,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,2BAA2B,CAAC,CAAC;IAC3D,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,6BAA6B,CAAC,CAAC;IAC/D,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC,UAAU,IAAI,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,kCAAkC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,uCAAuC,CAAC,CAAC;EACjK,CAAC;EAEO,UAAU;IAChB,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,iCAAiC,EAAE,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC;IACjE,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;EACnC,CAAC;EAED,MAAM;IACJ,OAAO,CACL,EAAC,IAAI,IAAC,KAAK,EAAC,6BAA6B;MACvC,cAAQ,KAAK,EAAC,2BAA2B,EAAC,SAAS,EAAE,MAAM,EAAE,OAAO,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,UAAU,EAAE,GAAG;MAChG,WAAK,KAAK,EAAC,6BAA6B;QACtC,WAAK,KAAK,EAAC,+BAA+B;UACxC,WAAK,KAAK,EAAC,0BAA0B;YACnC,WAAK,GAAG,EAAE,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,kBAAkB,CAAC,EAAE,GAAG,EAAC,OAAO,GAAE,CACtD;UACN,WAAK,KAAK,EAAC,0BAA0B;YACnC,cAAK,IAAI,CAAC,KAAK,CAAM;YACrB,aAAI,IAAI,CAAC,OAAO,CAAK,CACjB,CACF;QACN;UACE,SAAG,KAAK,EAAC,yBAAyB,EAAC,IAAI,EAAE,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,gCAAgC,CAAC,IACxF,IAAI,CAAC,WAAW,CACf,CACA,CACF,CACD,CACR,CAAC;EACJ,CAAC;EAED,gBAAgB;IACd,gEAAgE;IAChE,IAAI,SAAS,GAAG,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,iCAAiC,CAAC,CAAC;IACrE,IAAI,SAAS,IAAI,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,SAAS,CAAC,GAAG,IAAI,GAAG,EAAE,CAAC,GAAG,EAAE,EAAE;MAC5D,IAAI,CAAC,UAAU,EAAE,CAAC;KACnB;EACH,CAAC;;;;;;;;;;;;;;CAEF","sourcesContent":["import {Component, Host, h, State, Element} from '@stencil/core';\nimport Cancel from '../../assets/svg/cancel.svg';\n\n@Component({\n  tag: 'salla-maintenance-alert',\n  styleUrl: 'salla-maintenance-alert.scss',\n})\nexport class SallaMaintenanceAlert {\n\n  @Element() host: HTMLElement;\n  @State() title: string;\n  @State() message: string;\n  @State() buttonTitle: string;\n\n  componentWillLoad() {\n    this.title = salla.config.get('maintenance_details.title');\n    this.message = salla.config.get('maintenance_details.message');\n    this.buttonTitle = window.innerWidth <= 768 ? salla.config.get('maintenance_details.button_title') : salla.config.get('maintenance_details.button_full_title');\n  }\n\n  private closeAlert() {\n    salla.storage.set('hide_salla-maintenance-alert_at', Date.now());\n    this.host.style.display = 'none';\n  }\n\n  render() {\n    return (\n      <Host class=\"s-maintenance-alert-wrapper\">\n        <button class=\"s-maintenance-alert-close\" innerHTML={Cancel} onClick={() => this.closeAlert()}/>\n        <div class=\"s-maintenance-alert-content\">\n          <div class=\"s-maintenance-alert-container\">\n            <div class=\"s-maintenance-alert-icon\">\n              <img src={salla.url.cdn('images/alert.png')} alt=\"Alert\"/>\n            </div>\n            <div class=\"s-maintenance-alert-text\">\n              <h2>{this.title}</h2>\n              <p>{this.message}</p>\n            </div>\n          </div>\n          <div>\n            <a class=\"s-maintenance-alert-btn\" href={salla.config.get('maintenance_details.button_url')}>\n              {this.buttonTitle}\n            </a>\n          </div>\n        </div>\n      </Host>\n    );\n  }\n\n  componentDidLoad() {\n    //auto-hide the alert if close button is clicked before one hour\n    let hidden_at = salla.storage.get('hide_salla-maintenance-alert_at');\n    if (hidden_at && ((Date.now() - hidden_at) / 1000 / 60) < 60) {\n      this.closeAlert();\n    }\n  }\n\n}\n"]}