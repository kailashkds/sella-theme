{"version":3,"file":"salla-offer-modal.js","sourceRoot":"","sources":["../../../src/components/salla-offer-modal/salla-offer-modal.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, h, Element, Method, State } from '@stencil/core';\nimport Offer from \"./offer-schema\";\nimport SpecialDiscountIcon from '../../assets/svg/special-discount.svg';\nimport Tag from \"../../assets/svg/tag.svg\";\nimport Cart2 from '../../assets/svg/cart2.svg';\n\n/**\n * @slot header - The top of the popup, has replaceable props `{name}`, `{message}`.\n * @slot product - Replaces product card, has replaceable props `{name}`, `{url}`, `{image}`, `{price}`.\n * @slot category - Replaces Category badge, has replaceable props `{name}`, `{url}`.\n */\n@Component({\n  tag: 'salla-offer-modal',\n  styleUrl: 'salla-offer-modal.scss'\n})\n\nexport class SallaOfferModal {\n  private productSlot: string;\n  private categorySlot: string;\n  private modal: HTMLSallaModalElement;\n  @Element() host: HTMLElement;\n  @State() offer: null | Offer = null;\n  @State() offer_name: string;\n  @State() offer_message: string;\n  @State() hasError: boolean = false;\n  @State() errorMessage: string;\n  @State() productID: number;\n  @State() offer_type: string;\n\n  constructor() {\n    salla.event.on('offer-modal::open', product_id => this.open(product_id));\n\n    salla.lang.onLoaded(() => {\n      this.addToCartLabel = salla.lang.get(\"pages.cart.add_to_cart\")\n      this.translationLoaded = true;\n    });\n\n    this.categorySlot = this.host.querySelector('[slot=\"category\"]')?.innerHTML || `<span class=\"s-offer-modal-badge-icon\">{tagIcon}</span><span class=\"s-offer-modal-badge-text\">{name}</span>`;\n    this.productSlot = this.host.querySelector('[slot=\"product\"]')?.innerHTML || this.defaultProductSlot();\n    salla.event.on('offer-modal::open', product_id => this.open(product_id));\n    salla.product.event.onOfferExisted(offer => {\n      if (salla.storage.get('remember-offer-' + offer.id)) {\n        salla.log('User selected to don\\'t show this offer again.');\n        return;\n      }\n      this.open(offer.product_id);\n    });\n  }\n\n  @State() translationLoaded: boolean = false;\n  @State() addToCartLabel: string = salla.lang.get(\"pages.cart.add_to_cart\");\n\n  /**\n   * Show the available offers for the product\n   * @param product_id\n   */\n  @Method()\n  async open(product_id: number) {\n    this.productID = product_id;\n    //TODO:: make sure there is only one offer\n\n    this.hasError = false;\n    this.modal.open()\n    return await salla.api.withoutNotifier(() => salla.product.offers(product_id))\n      .then(response => this.showOffer(response.data[0]))\n      .catch(e => {\n        this.hasError = true;\n        this.errorMessage = e.response?.data?.error?.message || e.response?.data;\n      })\n      .finally(() => setTimeout(() => this.modal.stopLoading(), 1000));\n  }\n\n  /**\n   * Show offer details\n   * @param {Offer} offer\n   */\n  @Method()\n  async showOffer(offer) {\n    this.offer = offer;\n    this.offer_name = offer.name;\n    this.offer_message = offer.message;\n    if (this.offer.get.discounts_table) { \n      this.offer_type = 'discounts-table'\n    } else if (this.offer.get.products?.length) {\n      this.offer_type = 'products'\n    } else if (this.offer.get.categories?.length) {\n      this.offer_type = 'categories'\n    }\n    this.modal.setTitle(this.offer_name);\n  }\n\n  private rememberMe(event) {\n    salla.storage.set('remember-offer-' + this.offer.id, event.target.checked);\n  }\n\n  private addToCart(qty) {\n    //todo:: add enhancement, to cover the previous quantity, because if the discount to add two, user already added one before.\n    salla.api.withoutNotifier(() => salla.cart.quickAdd(this.productID, qty)).then(() => this.modal.close())\n  }\n\n  private getOfferContent() {\n    if (this.offer.get.discounts_table) {\n      return <div class=\"s-offer-modal-discount-table\">\n        <table>\n          <tbody>\n            {this.offer.get.discounts_table?.map(discount =>\n              <tr>\n                <td>{discount.text}</td>\n                <td class=\"s-offer-modal-discount-table-cell\">\n                  <salla-button fill=\"outline\" shape=\"btn\" color=\"primary\" size=\"medium\" width=\"normal\"\n                    onClick={() => this.addToCart(discount.quantity)}>{this.addToCartLabel}</salla-button>\n                </td>\n              </tr>\n            )}\n          </tbody>\n        </table>\n      </div>\n    }\n    else if (this.offer.get.products?.length) {\n      return <salla-slider\n        type=\"carousel\"\n        class={{\"s-offer-modal-slider-centered\": this.offer.get.products?.length <= 2, \"s-offer-modal-slider\": true}}\n        id=\"offer-modal-slider\"\n        controls-outer\n        show-controls={this.offer.get.products?.length <= 2 ? 'false' : 'true'}>\n        <div slot='items'>\n          {\n            this.offer.get.products?.map(product =>\n              <div class={{\n                \"s-offer-modal-product\": true,\n                \"s-offer-modal-slider-item\": true,\n                \"s-offer-modal-not-available\": !product.is_available\n              }} id={'product_' + product.id} innerHTML={this.productSlot\n                .replace(/\\{name\\}/g, product.name)\n                .replace(/\\{url\\}/g, product.url)\n                .replace(/\\{image\\}/g, product.thumbnail)\n                .replace(/\\{price\\}/g, product.has_special_price\n                  ? '<span class=\"s-offer-modal-product-sale-price\">' + salla.money(product.price) + '</span><span class=\"s-offer-modal-product-old-price\">' + salla.money(product.regular_price) + '</span>'\n                  : salla.money(product.price))}>\n                <div class=\"s-offer-modal-btn-wrap\">\n                  <salla-button width=\"wide\" fill='outline' data-id={product.id} disabled={!product.is_available}\n                    loader-position=\"center\" onClick={this.addItem}>\n                    {product.is_available ? salla.lang.get('pages.cart.add_to_cart') : salla.lang.get('pages.products.out_of_stock')}\n                  </salla-button>\n                </div>\n              </div>)\n          }\n       </div>\n      </salla-slider>\n    } \n    else if (this.offer.get.categories?.length) {\n      return <salla-slider\n        type=\"carousel\"\n        class={{\"s-offer-modal-slider-centered\": this.offer.get.categories?.length <= 2, \"s-offer-modal-slider\": true}}\n        id=\"offer-modal-slider\"\n        controls-outer\n        show-controls={this.offer.get.categories?.length <= 2 ? 'false' : 'true'}>\n        <div slot='items'>\n          {\n            this.offer.get.categories.map(category =>\n              <a href={category.urls.customer} class=\"s-offer-modal-badge s-offer-modal-slider-item s-offer-modal-cat-item\" innerHTML={\n                this.categorySlot\n                  .replace(/\\{tagIcon\\}/g, Tag)\n                  .replace(/\\{name\\}/g, category.name)\n                  .replace(/\\{url\\}/g, category.urls.customer)\n              }>\n              </a>\n            )}\n        </div>\n      </salla-slider>\n    }\n  }\n\n  //todo:: pass event then use sallaButton from it\n  private addItem() {\n    // this here, is sallaButton\n    this['load']();\n    return salla.cart.api\n      .quickAdd(this['dataset'].id)\n      .finally(() => this['stop']());\n  }\n\n  private defaultProductSlot() {\n    return '<a href={url} class=\"s-offer-modal-product-image-wrap\"><img class=\"s-offer-modal-product-image\" src=\"{image}\" /></a>' +\n      '<div class=\"s-offer-modal-product-info\">' +\n      '   <a href={url} class=\"s-offer-modal-product-name\">{name}</a>' +\n      '   <div class=\"s-offer-modal-product-price\">{price}</div>' +\n      '</div>';\n  }\n\n  render() {\n    return <salla-modal has-skeleton sub-title={this.offer_message} ref={modal => this.modal = modal}\n      isLoading={true} class={`s-offer-modal-type-${this.offer_type ? this.offer_type : ''}`}>\n      <div slot='loading'>\n        <div class=\"s-offer-modal-skeleton\">\n          <div class=\"s-offer-modal-skeleton-header\">\n            <salla-skeleton type='circle' height='80px' width='80px'></salla-skeleton>\n            <salla-skeleton height='15px' width='50%'></salla-skeleton>\n            <salla-skeleton height='10px' width='30%'></salla-skeleton>\n          </div>\n          <div class=\"s-offer-modal-skeleton-items\">\n            {[...Array(3)].map(() =>\n              <div class=\"s-offer-modal-skeleton-item\">\n                <salla-skeleton height='9rem'></salla-skeleton>\n                <div class=\"s-offer-modal-skeleton-item-title\">\n                  <salla-skeleton height='15px' width='100%'></salla-skeleton>\n                </div>\n                <div class=\"s-offer-modal-skeleton-item-subtitle\">\n                  <salla-skeleton height='9px' width='50%'></salla-skeleton>\n                  <div innerHTML={Cart2}></div>\n                </div>\n              </div>\n            )}\n          </div>\n          <div class=\"s-offer-modal-skeleton-footer\">\n            <salla-skeleton height='15px' width='50%'></salla-skeleton>\n            <salla-skeleton height='15px' width='30%'></salla-skeleton>\n          </div>\n        </div>\n      </div>\n      {!this.hasError && this.offer !== null\n\n        ? [<span slot='icon' class=\"s-offer-modal-header-icon\" innerHTML={SpecialDiscountIcon}></span>,\n        this.getOfferContent(),\n        <div class=\"s-offer-modal-footer\" slot=\"footer\">\n          {this.offer.formatted_date ?\n            <p\n              class=\"s-offer-modal-expiry\">{salla.lang.get('pages.products.offer_expires_in')} {this.offer.formatted_date}</p>\n            : ''}\n          <label class=\"s-offer-modal-remember-label\">\n            <input type=\"checkbox\" onChange={e => this.rememberMe(e)} class=\"s-offer-modal-remember-input\" />\n            &nbsp; {salla.lang.get('common.elements.remember_my_choice')}\n          </label>\n        </div>,\n        ] :\n        <salla-placeholder class=\"s-loyalty-placeholder\" alignment=\"center\">\n          {!!this.errorMessage ? <span slot=\"description\">{this.errorMessage}</span> : ''}\n        </salla-placeholder>\n      }\n    </salla-modal>\n  }\n}\n"]}