{"version":3,"file":"salla-progress-bar.js","sourceRoot":"","sources":["../../../src/components/salla-progress-bar/salla-progress-bar.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, h, Prop } from '@stencil/core';\nimport { Donation } from \"../salla-product-options/interfaces\";\n\n@Component({\n  tag: 'salla-progress-bar',\n  styleUrl: 'salla-progress-bar.scss',\n})\nexport class SallaProgressBar {\n\n  constructor() {\n    try {\n      if (this.donation) {\n        let donationJson = typeof this.donation == 'string' ? JSON.parse(this.donation) : this.donation;\n        if (donationJson.can_donate && donationJson.target_amount) {\n          this.value = donationJson.collected_amount;\n          this.target = donationJson.target_amount;\n          this.header = salla.lang.get('pages.products.target');\n          this.message = donationJson.target_end_date == '0000-00-00' ? '' : salla.lang.get('pages.products.donation_target_date') + ' ' + donationJson.target_end_date;\n        } else {\n          //in case the product is not enabled target campaign\n          this.message = donationJson.target_amount\n            ? donationJson.target_message\n            : '';\n        }\n      }\n    } catch (e) {\n      salla.log('Wrong donation json');\n    }\n\n    salla.lang.onLoaded(() => {\n      this.header = this.header?.replace('pages.products.target', salla.lang.get('pages.products.target'))\n      this.message = this.message?.replace('pages.products.donation_target_date', salla.lang.get('pages.products.donation_target_date'))\n    });\n\n    salla.onReady(() => {\n      this.color = this.color || salla.config.get('theme.color.primary', \"#ffd5c4\")\n      if (!this.unit) {\n        this.unit = salla.config.currency().symbol;\n      }\n    })\n  }\n\n  /**\n   * You can just pass the donation as json string ex: `{\"target_message\":null,\"target_date\":\"2023-04-18\",\"target_end_date\":\"2023-04-18\",\"target_amount\":400,\"collected_amount\":380,\"can_donate\":true}`\n   */\n  @Prop() donation: string | Donation;\n  /**\n   * The goal of the progress bar\n   */\n  @Prop({ mutable: true }) target: number;\n\n  /**\n   * The progress so far as of the goal.\n   */\n  @Prop({ mutable: true }) value: number;\n\n\n  /**\n   * Set height for the wrapper.\n   */\n  @Prop({ mutable: true }) height: string = \"10px\";\n\n  /**\n   * Big Title, before the progress bar.\n   */\n  @Prop({ mutable: true }) header: string;\n\n  /**\n   * Stripped effect for tje progress bar.\n   */\n  @Prop({ mutable: true }) stripped: boolean;\n\n  /**\n   * Subtitle under the progress bar or instead of it if the target not being set.\n   */\n  @Prop({ mutable: true }) message: string;\n\n  /**\n   * The unite to be added after the numbers, defaults to: `salla.config.currency().symbol`\n   */\n  @Prop({ mutable: true }) unit: string;\n\n  /**\n   * Progress bar color, defaults to: `salla.config.get('theme.color.primary', \"#ffd5c4\")`\n   */\n  @Prop({ mutable: true }) color: string;\n\n  private getPercentage(): number {\n    return (this.value / this.target) * 100;\n  }\n\n  render() {\n    if (!this.target && !this.message) {\n      return '';\n    }\n\n    return (\n      <div class=\"s-progress-bar-container\">\n        {this.header ? <div class=\"s-progress-bar-header\">{this.header}</div> : ''}\n        {this.getProgressBar()}\n        {this.message ? <span class=\"s-progress-bar-message\">{this.message}</span> : ''}\n      </div>\n    );\n  }\n\n  private getProgressBar() {\n    return this.target ? [\n      <div class=\"s-progress-bar-target-section\">\n        <span>{salla.helpers.number(this.value)} {this.unit}</span>\n        <span>{salla.helpers.number(this.target)} {this.unit}</span>\n      </div>,\n      <div class=\"s-progress-bar-wrapper\" style={{ 'height': this.height }}>\n        <div class={{ \"s-progress-bar-progress\": true, 's-progress-bar-progress-stripped': this.stripped }}\n          style={{ 'width': `${this.getPercentage()}%`, 'background-color': this.color }}>\n        </div>\n      </div>\n    ] : '';\n  }\n\n}\n"]}